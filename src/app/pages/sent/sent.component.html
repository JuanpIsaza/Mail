<section class="sent uk-margin-top">
  <div class="cont-form uk-container">
    <h1>Enviados</h1>

    <form
      class="form uk-margin-top uk-margin-bottom"
      [formGroup]="filterForm"
      (ngSubmit)="onSubmit()"
    >
      <fieldset class="uk-fieldset">
        <div class="uk-margin-bottom">
          <input
            class="uk-input"
            [ngClass]="{
              'is-invalid':
                filterForm.get(['data']).errors &&
                !filterForm.get(['data']).untouched
            }"
            formControlName="data"
            type="text"
            placeholder="Realiza una busqueda por algun filtro."
          />
          <div *ngIf="filterForm.get(['data']).errors">
            <div
              class="uk-text-danger"
              *ngIf="
                filterForm.get(['data']).errors.required &&
                !filterForm.get(['data']).untouched
              "
            >
              Campo requerido.
            </div>
            <div
              class="uk-text-danger"
              *ngIf="
                filterForm.get(['data']).errors.maxlength &&
                !filterForm.get(['data']).untouched
              "
            >
              El campo debe contener como máximo 50 caracteres.
            </div>
          </div>
        </div>
        <div class="uk-margin-bottom">
          <select class="uk-select" formControlName="filter">
            <option [ngValue]="null" disabled>Selecciona un flitro</option>
            <option *ngFor="let prf of paramsFilter" [ngValue]="prf">
              {{ prf }}
            </option>
          </select>
          <div *ngIf="filterForm.get(['filter']).errors">
            <div
              class="uk-text-danger"
              *ngIf="
                filterForm.get(['filter']).errors.required &&
                !filterForm.get(['filter']).untouched
              "
            >
              Filtro requerido.
            </div>
          </div>
        </div>
      </fieldset>
      <button
        class="uk-button uk-button-primary uk-margin-right"
        [disabled]="filterForm.invalid"
      >
        Buscar
      </button>
      <button
        class="uk-button uk-button-primary uk-margin-left"
        (click)="resetFilter()"
      >
        Limpiar
      </button>
    </form>

    <div class="uk-overflow-auto">
      <table
        class="uk-table uk-table-hover uk-table-striped uk-text-center uk-table-middle uk-table-divider"
      >
        <thead>
          <tr>
            <th class="uk-text-center">Favorito</th>
            <th class="uk-text-center">Asunto</th>
            <th class="uk-text-center">Destinatario</th>
            <th class="uk-text-center">Descripción</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let mail of mailsCopy; index as i">
            <td>
              <input
                class="uk-checkbox"
                type="checkbox"
                disabled
                value="{{ mail.favorite }}"
                [checked]="mail.favorite"
              />
            </td>
            <td>{{ mail.subject }}</td>
            <td class="">{{ mail.receiver }}</td>
            <td class="">{{ mail.description }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <ng-container *ngIf="msgSent">
      <div class="uk-text-danger uk-margin-top">
        Error al cargar los mensajes enviados.
      </div>
    </ng-container>
  </div>
</section>
